{% load static %}
{% include "database_of_janacek_works/main_menu.html" %}

<!doctype html>
<html xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title></title>

<style>
    #ex1 {

    margin: auto;
    {% comment %}float: right;{% endcomment %}
    {% comment %}transition: width 2s;{% endcomment %}
    }

{% comment %}#ex1.clicked {
    width: 70%;
    border: 3px solid red;
}{% endcomment %}

</style>
</head>
<body>
<div id="ex1">
    <table id="piece" class="row-border" cellspacing="0" width="100%" data-url="{% url 'rest_piece' %}">
        <thead>
            <tr>
                <th>ID</th>
                <th>CZ Title</th>
                <th>En title</th>
                <th>cat num</th>
                <th>Time</th>
                <th>date</th>
                <th>place</th>
                <th>compose for</th>
                <th>movement</th>
                <th>wiki</th>
            </tr>
        </thead>
    <tbody>

    </tbody>
    <tfoot>
    <tr>

    </tr>
    </tfoot>
</table>

</div>

<button class="btn1">Hide</button>
<button class="show">Show</button>

</body>

<script  type="text/javascript">

   $(document).ready(function() {
        var table = $('#piece').DataTable( {
            dom: 'lfBrtip',
            stateSave: true,
            buttons: [
                {
                    extend: 'colvis',
                    postfixButtons: [ 'colvisRestore' ],
                    columns: ':not(:first-child)'
                }
            ],
            columnDefs: [
                {
                    targets: -1,
                    visible: false
                }
            ],
            "processing": true,
            "serverSide": true,
            "dataType": "json",
            "pageLength": 15,
            //"autoWidth": false,
            //"stateSave": true,
            "ajax": "{% url 'rest_piece' %}",
            "columns": [
            {
                "className": 'details-control'
            },
            {}, {}, {}, {},{},{},{},{},{}
        ],
            {% comment %}
           "columnDefs": [
                {
                    "targets":[3],
                    "visible": false
                },
                {
                    "targets":[4],
                    "visible": false
                },
                {
                    "targets":[5],
                    "visible": false
                },
                {
                    "targets":[6],
                    "visible": false
                },
                {
                    "targets":[7],
                    "visible": false
                },
                {
                    "targets":[8],
                    "visible": false
                }
            ]{% endcomment %}

        });
    });
</script>

<script>

    $(document).ready(function() {
        $('#piece tbody').on('click', 'tr', function () {
            //$("#ex1").width("70%");
            //alert("70%");
            var pieceId = $(this).find("td:first").text();

            var url = '{% url 'piece_detail' 999 %}'.replace (999, pieceId);
            window.location.href = url

        });
    });



$(document).ready(function(){

    $(".btn1").click(function(){
        $("#ex2").hide();
        $("#ex1").width("100%")
    });
    $(".show").click(function(){
        $("#ex2").show();
        $("#ex1").width("70%")
    });
});

</script>




</html>